<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
    <title>TODO supply a title</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="/css/navbar-responsive.css">
    <link rel="stylesheet" href="/css/formulario-registro-opinion.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>
        


        textarea {
            margin-top: 10px;
            width: 100%;
            height: 100px;
            -moz-border-bottom-colors: none;
            -moz-border-left-colors: none;
            -moz-border-right-colors: none;
            -moz-border-top-colors: none;
            background: none repeat scroll 0 0 rgba(0, 0, 0, 0.07);
            border-color: -moz-use-text-color #FFFFFF #FFFFFF -moz-use-text-color;
            border-image: none;
            border-radius: 6px 6px 6px 6px;
            border-style: none solid solid none;
            border-width: medium 1px 1px medium;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.12) inset;
            color: #555555;
            font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
            font-size: 1em;
            line-height: 1.4em;
            padding: 5px 8px;
            transition: background-color 0.2s ease 0s;
        }


        textarea:focus {
            background: none repeat scroll 0 0 #FFFFFF;
            outline-width: 0;
        }
    </style>
</head>

<body>
    <nav th:replace="fragments/navbar :: nav"></nav>
    <div class="contenedor-back">
        <div class="contenedor">

            <form class="formulario-registro-de-usuario" th:action="@{/opinion/registrar/__${reserva.id}__}" method="POST"
                enctype="multipart/form-data">
                <input type="text" th:value="${reserva.cliente.nombreUsuario}" name="huesped" hidden>
                <input type="text" th:value="${reserva.propiedad.id}" name="idPropiedad" hidden>
                <hr>
                <h3 class="titulo">Opinión</h3>
                <hr>
                <div class="rating">
                    <input type="radio" id="star5" name="rating" value="5" th:checked="${puntuacion == 5}" />
                    <label for="star5" th:onclick="'javascript:enviarPuntuacion(5)'"></label>
                    <input type="radio" id="star4" name="rating" value="4" th:checked="${puntuacion == 4}" />
                    <label for="star4" th:onclick="'javascript:enviarPuntuacion(4)'"></label>
                    <input type="radio" id="star3" name="rating" value="3" th:checked="${puntuacion == 3}" />
                    <label for="star3" th:onclick="'javascript:enviarPuntuacion(3)'"></label>
                    <input type="radio" id="star2" name="rating" value="2" th:checked="${puntuacion == 2}" />
                    <label for="star2" th:onclick="'javascript:enviarPuntuacion(2)'"></label>
                    <input type="radio" id="star1" name="rating" value="1" th:checked="${puntuacion == 1}" />
                    <label for="star1" th:onclick="'javascript:enviarPuntuacion(1)'"></label>
                </div>
                <label for="apellido">Comentar:</label>
                <textarea name="comentario" id="" cols="30" rows="10" ></textarea>

                <label for="imagen">Fotos(Opcional):</label>
                <input class="imagen" type="file" name="archivos[]" accept="image/*" multiple>

                <input class="enviar" type="submit" value="Enviar">
            </form>
        </div>
    </div>
    <script>
        // Obtén todas las etiquetas de estrella y agrega un controlador de eventos clic a cada una
        var starLabels = document.querySelectorAll('.rating__label');
        starLabels.forEach(function (starLabel) {
            starLabel.addEventListener('click', function () {
                var ratingValue = this.previousElementSibling.value; // Obtén el valor de la estrella seleccionada
                document.getElementById('rating-input').value = ratingValue; // Establece el valor en el campo oculto
                document.getElementById('rating-form').submit(); // Envía el formulario al backend
            });
        });
    </script>
    <script src="/js/navbar-responsive.js"></script>
</body>

</html>